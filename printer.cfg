[include mainsail.cfg]
[include sovol-macros.cfg]
[include timelapse.cfg]
[include GP3D_Macro.cfg]
[include test_speed.cfg]
[include KAMP_Settings.cfg]
[include sb-dummy.cfg]
[include new-macros.cfg]
[include steppers.cfg]
[include eddy.cfg]
[include fans-and-temp-sensors.cfg]
[include moonraker_obico_macros.cfg]

[include options/lcd/*.cfg]
# [include options/hdmi/*.cfg]

[mcu]
serial: /dev/serial/by-id/usb-Klipper_stm32f103xe_32FFD5054747393934692057-if00
restart_method: command

[mcu extra_mcu]
serial: /dev/serial/by-id/usb-Klipper_stm32f103xe_50FF69068367515546441367-if00
restart_method: command

[printer]
kinematics: corexy
max_velocity: 700
# printer max 40k
# input shaping says <= 8700 for x, <= 4100 for y
max_accel: 20000
minimum_cruise_ratio: 0.5
max_z_velocity: 20
max_z_accel: 500
square_corner_velocity: 5.0
autosave_path: ../backup

[virtual_sdcard]
path: ~/printer_data/gcodes
on_error_gcode: CANCEL_PRINT

[force_move]
enable_force_move: true

[extruder]
rotation_distance: 6.738 #6.745 #6.5
nozzle_diameter: 0.400
filament_diameter: 1.75
# for purge
max_extrude_cross_section: 6

[thermistor my_thermistor_e]
temperature1:25
resistance1:110000
temperature2:100
resistance2:7008
temperature3:220
resistance3:435

[verify_heater extruder]
max_error: 120
check_gain_time:30
hysteresis: 5
heating_gain: 2

[filament_switch_sensor filament_sensor]
pause_on_runout: True
event_delay: 3.0
pause_delay: 0.5
switch_pin: PE9

[thermistor my_thermistor]
temperature1:25
resistance1:100000
temperature2:50
resistance2:18085.4
temperature3:100
resistance3:5362.6

[heater_bed]
heater_pin:PA0
sensor_type: my_thermistor
sensor_pin: PC5
max_power: 1.0
min_temp: 5
max_temp: 105
#control : pid
#pid_kp : 73.571
#pid_ki : 1.820
#pid_kd : 783.849

[verify_heater heater_bed]
max_error: 120
check_gain_time:40
hysteresis: 5
heating_gain: 2

[probe_pressure]
pin: ^!PE12
x_offset: 0
y_offset: 0
z_offset : 0
speed: 1.0

[quad_gantry_level]
gantry_corners:
	-60,-10
	410,420
points:
	36,10
	36,320
	346,320
	346,10
speed: 400
horizontal_move_z: 5 # orig 10
retry_tolerance: 0.02 # orig 0.05 # someone had .008 which is nuts?
retries: 10 # orig 5
max_adjust: 10 # orig 30

[gcode_arcs]
resolution: 1.0

[idle_timeout]
gcode: _IDLE_TIMEOUT
timeout: 600

[pause_resume]

[exclude_object]

[firmware_retraction]

[adxl345]
cs_pin:extra_mcu:PB12

[resonance_tester]
accel_chip: adxl345
probe_points:
    175, 175, 30  # an example175 Y175 Z30
#accel_per_hz:50
min_freq:1
max_freq:120
#max_smoothing:0.2
#hz_per_sec:0.5

[input_shaper]
#damping_ratio_x: 0.001
#damping_ratio_y: 0.001
shaper_type_x = mzv
shaper_freq_x = 54.2
shaper_type_y = mzv
shaper_freq_y = 37

[save_variables]
filename = ~/printer_data/config/saved_variables.cfg

# was 2.492 (automatic)
# was 2.055 (manual)
# was 1.888 -- got some good prints out of this with orange ASA, but then it's terrible
# automatic probe gave me 2.54 after the 1.888
# # manual probing gave me 2.276
## [probe]
## z_offset = 2.246
##

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [temperature_probe btt_eddy]
#*# calibration_temp = 54.695221
#*#
#*# [probe_eddy_current btt_eddy]
#*# calibrate =
#*# 	0.050156:3173056.930,0.090000:3172707.963,0.129844:3172375.851,
#*# 	0.170156:3172044.214,0.210000:3171723.695,0.249844:3171400.161,
#*# 	0.290156:3171077.810,0.330000:3170792.766,0.369844:3170502.169,
#*# 	0.410156:3170182.994,0.450000:3169880.950,0.489844:3169589.338,
#*# 	0.530156:3169309.890,0.570000:3169034.605,0.609844:3168761.671,
#*# 	0.650156:3168483.047,0.690000:3168212.224,0.729844:3167968.980,
#*# 	0.770156:3167701.562,0.810000:3167457.150,0.849844:3167223.685,
#*# 	0.890156:3166961.257,0.930000:3166696.611,0.969844:3166486.282,
#*# 	1.010156:3166208.199,1.050000:3166025.081,1.089844:3165768.758,
#*# 	1.130156:3165542.634,1.170000:3165332.310,1.209844:3165102.777,
#*# 	1.250156:3164913.412,1.290000:3164687.757,1.329844:3164481.105,
#*# 	1.370156:3164268.736,1.410000:3164058.958,1.449844:3163871.670,
#*# 	1.490156:3163661.056,1.530000:3163496.984,1.569844:3163296.606,
#*# 	1.610156:3163088.336,1.650000:3162935.723,1.689844:3162745.653,
#*# 	1.730156:3162563.341,1.770000:3162399.865,1.809844:3162205.086,
#*# 	1.850156:3162048.225,1.890000:3161893.980,1.929844:3161714.002,
#*# 	1.970156:3161545.535,2.010000:3161400.242,2.049844:3161238.268,
#*# 	2.090156:3161081.784,2.130000:3160942.410,2.169844:3160783.812,
#*# 	2.210156:3160628.248,2.250000:3160484.258,2.289844:3160321.757,
#*# 	2.330156:3160212.143,2.370000:3160049.923,2.409844:3159910.208,
#*# 	2.450156:3159779.143,2.490000:3159660.125,2.529844:3159538.464,
#*# 	2.570156:3159404.723,2.610000:3159268.677,2.649844:3159169.684,
#*# 	2.690156:3159032.943,2.730000:3158886.162,2.769844:3158769.906,
#*# 	2.810156:3158648.635,2.850000:3158534.901,2.889844:3158429.316,
#*# 	2.930156:3158316.134,2.970000:3158199.055,3.009844:3158098.299,
#*# 	3.050156:3157981.060,3.090000:3157898.351,3.129844:3157782.253,
#*# 	3.170156:3157659.576,3.210000:3157564.802,3.249844:3157472.847,
#*# 	3.290156:3157354.728,3.330000:3157245.114,3.369844:3157135.151,
#*# 	3.410156:3157023.102,3.450000:3156961.575,3.489844:3156851.238,
#*# 	3.530156:3156749.284,3.570000:3156666.668,3.609844:3156567.477,
#*# 	3.650156:3156484.542,3.690000:3156392.284,3.729844:3156289.535,
#*# 	3.770156:3156206.199,3.810000:3156123.167,3.849844:3156021.790,
#*# 	3.890156:3155948.235,3.930000:3155874.086,3.969844:3155772.951,
#*# 	4.010156:3155696.263,4.050000:3155606.405
#*# reg_drive_current = 15
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	0.431096, 0.354907, 0.280625, 0.235660, 0.150765, 0.104811, 0.108910, 0.112707, 0.131061, 0.139825, 0.177446, 0.263002, 0.319969, 0.356086, 0.432063
#*# 	0.344820, 0.334868, 0.251277, 0.187509, 0.158383, 0.136192, 0.121884, 0.118213, 0.132896, 0.153174, 0.177092, 0.216141, 0.277581, 0.348251, 0.386264
#*# 	0.353728, 0.337174, 0.279276, 0.224084, 0.187155, 0.160792, 0.144582, 0.148291, 0.157674, 0.185419, 0.207772, 0.251277, 0.300279, 0.349031, 0.383597
#*# 	0.321885, 0.333745, 0.277581, 0.224511, 0.198548, 0.164265, 0.159634, 0.157319, 0.166001, 0.178828, 0.219472, 0.251277, 0.302666, 0.340605, 0.361985
#*# 	0.358446, 0.346730, 0.294844, 0.239856, 0.197310, 0.184391, 0.170501, 0.159056, 0.186127, 0.185419, 0.215714, 0.240244, 0.277927, 0.329133, 0.342909
#*# 	0.356696, 0.369102, 0.301974, 0.258460, 0.235272, 0.198975, 0.180919, 0.182300, 0.180564, 0.207345, 0.218234, 0.258502, 0.281320, 0.325311, 0.346730
#*# 	0.372639, 0.345210, 0.287753, 0.248985, 0.184746, 0.184037, 0.166674, 0.170501, 0.178155, 0.177092, 0.195217, 0.232242, 0.273537, 0.298583, 0.327612
#*# 	0.364038, 0.370951, 0.317421, 0.272840, 0.241876, 0.212924, 0.217807, 0.215287, 0.219899, 0.221992, 0.237564, 0.264950, 0.281666, 0.318451, 0.364994
#*# 	0.372639, 0.362022, 0.297234, 0.259928, 0.218234, 0.198975, 0.206918, 0.173973, 0.189246, 0.198975, 0.209864, 0.250888, 0.277581, 0.315368, 0.340998
#*# 	0.360845, 0.369141, 0.310105, 0.255044, 0.232242, 0.217807, 0.207345, 0.192698, 0.193125, 0.215714, 0.228269, 0.249329, 0.281318, 0.298929, 0.342519
#*# 	0.369976, 0.351937, 0.289103, 0.255042, 0.234145, 0.215287, 0.203160, 0.187509, 0.193125, 0.213622, 0.239856, 0.266418, 0.294537, 0.312326, 0.346730
#*# 	0.359945, 0.348004, 0.302643, 0.256067, 0.232242, 0.211529, 0.199402, 0.201067, 0.209437, 0.221992, 0.243663, 0.278624, 0.298932, 0.327612, 0.357875
#*# 	0.377395, 0.356389, 0.303670, 0.269884, 0.232242, 0.225749, 0.211529, 0.213195, 0.215714, 0.222419, 0.252012, 0.279622, 0.312326, 0.344820, 0.372334
#*# 	0.377400, 0.357836, 0.305365, 0.257386, 0.224084, 0.219472, 0.207345, 0.207345, 0.217807, 0.220326, 0.255086, 0.286058, 0.319969, 0.358446, 0.398833
#*# 	0.448912, 0.378574, 0.300971, 0.274190, 0.226603, 0.209864, 0.203587, 0.201495, 0.229934, 0.236049, 0.256509, 0.300279, 0.342909, 0.387748, 0.448818
#*# x_count = 15
#*# y_count = 15
#*# mesh_x_pps = 3
#*# mesh_y_pps = 3
#*# algo = bicubic
#*# tension = 0.5
#*# min_x = 15.0
#*# max_x = 333.92
#*# min_y = 15.0
#*# max_y = 332.94
#*#
#*# [extruder]
#*# control = pid
#*# pid_kp = 27.832
#*# pid_ki = 4.315
#*# pid_kd = 44.878
#*#
#*# [heater_bed]
#*# control = pid
#*# pid_kp = 73.349
#*# pid_ki = 1.948
#*# pid_kd = 690.394
